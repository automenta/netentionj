<html>
    <head>
        <title></title>

        <script src="lib/jquery.min.js"></script>
        <script src="index.js"></script>
    </head>
    <body>

        <form onsubmit="return false;">
            <input type="text" name="message" value="Hello, World!"/><input type="button" value="Send Web Socket Data"
                                                                            onclick="send(this.form.message.value)" />
            <h3>Output</h3>
            <textarea id="responseText" style="width:500px;height:300px;"></textarea>
        </form>
        
        <script>
            var socket = websocket({
               onMessage: function(event) {
                    var ta = document.getElementById('responseText');
                    ta.value = ta.value + '\n' + event.data                   
               },
               onConnect: function(event) {
                    var ta = document.getElementById('responseText');
                    ta.value = "Web Socket opened!";                   
                    
                    socket.send([ 'sub', 'a' ]);
                    socket.send([1,2,3]);
                    socket.send(["b"]);
                    socket.send({});
               },
               onDisconnect: function(event) {
                    var ta = document.getElementById('responseText');
                    ta.value = ta.value + "Web Socket closed";                   
               }
            });

        </script>
    </body>
</html>
